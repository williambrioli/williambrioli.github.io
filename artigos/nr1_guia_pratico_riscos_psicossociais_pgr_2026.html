<!doctype html>
<!-- 
  Esta linha diz para o navegador: 
  "Oi, eu sou um documento HTML moderno!"
-->
<html lang="pt-BR">
<!-- 
  Aqui come√ßa o documento HTML.
  O atributo lang="pt-BR" fala que o site est√° em portugu√™s do Brasil.
-->
<head>
  <!-- 
    Dentro do <head> ficam coisas IMPORTANTES:
    - configura√ß√µes
    - dados invis√≠veis para o usu√°rio
    - links para arquivos CSS
    - meta informa√ß√µes
  -->

  <meta charset="utf-8" />
  <!-- 
    Diz que o texto usa caracteres modernos (acento, √ß, etc.)
    Sem isso, tudo pode ficar estranho.
  -->

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- 
    Diz para o navegador no celular:
    "Mostre o site do tamanho certinho da tela!"
    Isso deixa o site responsivo.
  -->
<!-- Open Graph -->
<meta property="og:title" content="Blog ‚Ä¢ Psican√°lise, Terapia e Vida Real">
<meta property="og:description" content="Reflex√µes sobre sa√∫de emocional, relacionamentos, carreira, empreendedorismo e desenvolvimento humano, a partir da pr√°tica cl√≠nica e da experi√™ncia no mundo corporativo.">
<meta property="og:type" content="website">
<meta property="og:locale" content="pt_BR">
<meta property="og:image" content="https://williambrioli.com.br/img/HEROog.jpg">
  <!-- 
    Os links abaixo carregam arquivos CSS (estilos).
    Eles deixam o site bonito, colorido, organizado, com fonte certa.
  -->

  <link rel="stylesheet" href="/css/menu.css">
  <!-- Arquivo que estiliza o menu do site -->

  <link rel="stylesheet" href="/css/base.css">
  <!-- Arquivo com estilos gerais usados no site todo -->

  <link rel="stylesheet" href="/css/blog.css">
  <!-- Arquivo que estiliza p√°ginas de blog -->

  <link rel="stylesheet" href="/css/whatsapp-fab.css">
  <!-- Arquivo que estiliza o bot√£o flutuante do WhatsApp -->

  <link rel="stylesheet" href="/css/article-page.css">
  <!-- Arquivo que estiliza exclusivamente a p√°gina do artigo -->

  <link rel="stylesheet" href="/css/search-bar.css">
  <!-- Arquivo que estiliza a barra de pesquisa -->


  <!-- =====================================================
       üîß BLOCO DE CONFIGURA√á√ÉO DO ARTIGO
       Aqui voc√™ PREENCHE informa√ß√µes do artigo espec√≠fico.
       √â como um "cart√£o de dados" s√≥ desse artigo.
       √â edit√°vel e seguro.
       ===================================================== -->

<script>
  const ARTICLE = {
    
    
    title: "NR-1 em 2026: guia pr√°tico para implementar a gest√£o de riscos psicossociais no PGR",
         
  
       
// üìù Conte√∫do do artigo (TEXTO DO ARTIGO FICA AQUI) /*
        
    content: `


<p>Jo√£o, gerente de vendas de uma empresa em expans√£o, come√ßou a notar um padr√£o inc√¥modo: afastamentos por ansiedade, discuss√µes por metas inalcan√ß√°veis, mensagens fora do hor√°rio virando rotina. Numa reuni√£o, uma colega respirou fundo e disse: ‚Äúsinto que trabalho com um peso nas costas‚Äù. A frase acendeu um alerta. Jo√£o lembrou da alegoria da caverna de Plat√£o: por anos, a empresa olhou apenas para as sombras dos n√∫meros, ignorando a luz do que realmente acontecia com as pessoas. Ao entender que, a partir de 2026, a NR-1 exigir√° que os riscos psicossociais sejam mapeados, tratados e demonstrados no PGR, ele decidiu sair da caverna. O foco n√£o seria mais apenas quanto a equipe entrega, e sim como a equipe trabalha.</p>

<h2>Explica√ß√£o cient√≠fica simplificada</h2>
<p>A Norma Regulamentadora n¬∫ 1 define as disposi√ß√µes gerais de seguran√ßa e sa√∫de no trabalho no Brasil e estabelece o Gerenciamento de Riscos Ocupacionais e o Programa de Gerenciamento de Riscos. As vers√µes mais recentes detalham que os riscos psicossociais fazem parte do escopo de an√°lise e controle. Em termos simples, riscos psicossociais s√£o condi√ß√µes de organiza√ß√£o e gest√£o do trabalho que, por sua natureza, intensidade ou dura√ß√£o, aumentam a probabilidade de adoecimento mental e f√≠sico. Entre eles est√£o sobrecarga, metas incompat√≠veis, baixa autonomia, ass√©dio moral ou sexual, comunica√ß√£o deficiente, conflito de pap√©is e jornadas extensas.</p>
<p>Do ponto de vista da sa√∫de, a exposi√ß√£o prolongada ao estresse cr√¥nico ativa respostas fisiol√≥gicas que, se mantidas, elevam a chance de ansiedade, depress√£o, s√≠ndrome de burnout, dist√∫rbios do sono e at√© agravos cardiovasculares. Diretrizes internacionais em portugu√™s da OMS e da OIT refor√ßam que a preven√ß√£o eficaz combina interven√ß√µes na organiza√ß√£o do trabalho, forma√ß√£o de lideran√ßas e oferta de apoio psicossocial. Em linguagem pr√°tica: n√£o √© apenas pedir resili√™ncia individual, √© redesenhar o trabalho para ser saud√°vel e sustent√°vel.</p>

<h2>Analise profissional aplicada ao tema</h2>
<p>Para gestores de RH, l√≠deres e empreendedores, a mudan√ßa √© de paradigma. N√£o basta citar valores institucionais. A partir do PGR, a empresa precisa demonstrar que identificou riscos psicossociais, priorizou √°reas cr√≠ticas, definiu a√ß√µes de preven√ß√£o e acompanha indicadores. Na pr√°tica, isso significa:</p>
<p>1. Governan√ßa clara. Dire√ß√£o, RH, SST e lideran√ßa de linha com pap√©is definidos, prazos e evid√™ncias de execu√ß√£o. 2. Crit√©rios transparentes. Como a empresa classifica baixo, m√©dio e alto risco; quais sinais de alerta s√£o usados (absente√≠smo, rotatividade, atestados, clima, queixas formais). 3. A√ß√µes proporcionais ao risco. Onde o risco √© alto, o plano precisa ir al√©m de campanhas; deve ajustar metas, processos, carga de trabalho e condutas. 4. Reavalia√ß√£o peri√≥dica. O risco precisa cair ao longo do tempo e isso deve aparecer nos registros.</p>
<p>O ganho organizacional √© tang√≠vel: menos afastamentos, redu√ß√£o de turnover, ambiente mais est√°vel e reputa√ß√£o fortalecida. Filosoficamente, √© a travessia plat√¥nica do mundo das sombras para o mundo das formas: trocar reatividade por m√©todo, suposi√ß√µes por evid√™ncias e controle pelo desenvolvimento de pessoas.</p>

<h2>Aplica√ß√µes pr√°ticas e orienta√ß√µes</h2>
<ul>
  <li>Mapeamento inicial estruturado. Levante atividades, demandas e recursos por fun√ß√£o. Identifique sinais de risco psicossocial: sobrecarga, metas incompat√≠veis, baixa autonomia, ass√©dio, jornadas extensas, conflitos de pap√©is e falhas de comunica√ß√£o.</li>
  <li>Classifica√ß√£o e prioriza√ß√£o. Atribua n√≠veis de risco (baixo, m√©dio, alto) com crit√©rios objetivos. Registre no PGR com justificativas, respons√°veis e prazos.</li>
  <li>Plano de a√ß√£o obrigat√≥rio no PGR. Defina objetivos, respons√°veis, marcos de acompanhamento e evid√™ncias. Documente tudo.</li>
  <li>Programas de comunica√ß√£o n√£o violenta. Treinamento pr√°tico para l√≠deres e equipes, com exerc√≠cios de escuta ativa, pedidos claros, feedback respeitoso e manejo de conflitos.</li>
  <li>Fortalecimento da cultura organizacional. Atualize valores e comportamentos esperados; crie rituais de reconhecimento; alinhe metas a recursos; desencoraje pr√°ticas de cobran√ßa humilhantes.</li>
  <li>Canais de √©tica e den√∫ncia. Estabele√ßa canal independente, sigiloso, com prazos de resposta e prote√ß√£o contra retalia√ß√£o. Publique o fluxo e devolutivas agregadas.</li>
  <li>Protocolos formais de tratamento de queixas. Crie fluxos com triagem, investiga√ß√£o, media√ß√£o e decis√£o; registre prazos, pap√©is e formas de repara√ß√£o; use matrizes de gravidade e recorr√™ncia.</li>
  <li>Revis√£o de metas e carga de trabalho. Ajuste metas √† capacidade real; distribua tarefas de modo equilibrado; crie pausas e janelas sem reuni√£o; limite contato fora do expediente, salvo exce√ß√µes justificadas.</li>
  <li>Pol√≠ticas contra ass√©dio e discrimina√ß√£o. Defina condutas proibidas, exemplos, consequ√™ncias, medidas educativas e disciplinares; treine l√≠deres para reconhecer sinais e agir corretamente.</li>
  <li>Capacita√ß√£o de lideran√ßa. Forme gestores em feedback, CNV, preven√ß√£o de ass√©dio, condu√ß√£o de conversas dif√≠ceis, defini√ß√£o de prioridades e planejamento de carga.</li>
  <li>Apoio psicossocial. Disponibilize triagem breve, acolhimento e encaminhamento; ofere√ßa rodas de conversa mediadas, grupos de apoio, plant√£o psicol√≥gico e educa√ß√£o em sa√∫de mental.</li>
  <li>Ferramentas e checklists. Utilize instrumentos curtos e frequentes para captar clima, carga e sinais de risco; crie um checklist trimestral de conformidade do PGR.</li>
  <li>Indicadores e evid√™ncias. Monitore absente√≠smo, afastamentos, rotatividade, resultados de clima, volume e natureza das queixas, tempo de resolu√ß√£o, reincid√™ncias e dados de auditoria interna.</li>
  <li>Melhoria cont√≠nua. Reavalie riscos ap√≥s as a√ß√µes, compare com a linha de base e revise o plano. Documente li√ß√µes aprendidas e comunique avan√ßos.</li>
</ul>

<h2>Pontes para psicoterapia</h2>
<p>Com o olhar de Plat√£o, a empresa que sai da caverna escolhe ver o todo: processos, cultura e pessoas. A psicoterapia entra como ponte entre o cuidado organizacional e o desenvolvimento individual. Para l√≠deres e equipes, interven√ß√µes cl√≠nicas e educativas oferecem um espa√ßo seguro para decodificar gatilhos do trabalho, construir limites saud√°veis, treinar CNV e resgatar energia. Para a organiza√ß√£o, programas de psicoeduca√ß√£o, palestras, grupos de apoio e consultoria cl√≠nica ajudam a prevenir riscos, orientar decis√µes e sustentar mudan√ßas de cultura. Assim, a empresa cuida do sistema, e cada pessoa cuida de si, em trajet√≥rias complementares.</p>

<h2>Conclus√£o</h2>
<p>A NR-1 sinaliza um novo contrato de trabalho: produtividade com sa√∫de. Implementar a gest√£o de riscos psicossociais no PGR n√£o √© formalidade; √© estrat√©gia. O caminho pr√°tico inclui mapear, priorizar, agir, medir e melhorar. A met√°fora de Plat√£o lembra que o conforto das sombras √© tentador, mas a clareza da luz produz resultados mais est√°veis e humanos. Ao alinhar metas a recursos, fortalecer a lideran√ßa e instituir canais e protocolos confi√°veis, a empresa protege pessoas, reduz riscos e amplia sua capacidade de inovar e crescer de forma sustent√°vel.</p>

<h2>Refer√™ncias</h2>
<ul>
  <li>Brasil. Minist√©rio do Trabalho e Emprego. Portaria MTE n¬∫ 1.419, de 27 de agosto de 2024. Altera a NR-1 e disp√µe sobre o Gerenciamento de Riscos Ocupacionais, incluindo fatores psicossociais. Dispon√≠vel em: https://www.gov.br/trabalho-e-emprego/pt-br/assuntos/inspecao-do-trabalho/seguranca-e-saude-no-trabalho/sst-portarias/2024/portaria-mte-no-1-419-nr-01-gro-nova-redacao.pdf</li>
  <li>Brasil. Minist√©rio do Trabalho e Emprego. NR-01 ‚Äî Disposi√ß√µes Gerais e Gerenciamento de Riscos Ocupacionais. Vers√£o consolidada. Dispon√≠vel em: https://www.gov.br/trabalho-e-emprego/pt-br/acesso-a-informacao/participacao-social/comissao-tripartite-partitaria-permanente/normas-regulamentadora/normas-regulamentadoras-vigentes/nr-01</li>
  <li>Brasil. Minist√©rio do Trabalho e Emprego. Inclus√£o de fatores de risco psicossociais no GRO. Nota informativa e orienta√ß√µes em portugu√™s. Dispon√≠vel em: https://www.gov.br/trabalho-e-emprego/</li>
  <li>Organiza√ß√£o Mundial da Sa√∫de; Organiza√ß√£o Internacional do Trabalho. Diretrizes da OMS e da OIT sobre sa√∫de mental no trabalho. Documento em portugu√™s. Dispon√≠vel em: https://www.who.int/pt/news/item/28-09-2022-who-and-ilo-call-for-new-measures-to-tackle-mental-health-issues-at-work</li>
  <li>Organiza√ß√£o Internacional do Trabalho. Riscos psicossociais no trabalho: conceitos, preven√ß√£o e gest√£o. Publica√ß√µes em portugu√™s do Escrit√≥rio da OIT no Brasil. Dispon√≠vel em: https://www.ilo.org/brasilia</li>
</ul>











<div id="authorBio"></div>

      `
    };
   
    
</script>

<!-- Novo script de preenchimento autom√°tico -->
<script src="/js/article-auto-fill.js" defer></script>

    
       <!-- =========================
       SEO / META TAGS 
       Estas linhas ajudam o Google e redes sociais a entenderem a p√°gina.
       ========================= -->
  
  <title id="metaTitle"></title>
  <!-- T√≠tulo que aparece na aba do navegador -->

  <meta name="description" id="metaDescription" content="">
  <!-- Descri√ß√£o interna preenchida dinamicamente -->

  <meta name="author" id="metaAuthor" content="">
  <!-- Nome do autor da p√°gina -->

  <meta property="og:title" id="ogTitle" content="">
  <!-- T√≠tulo usado quando algu√©m compartilha o link no Facebook/WhatsApp -->

  <meta property="og:description" id="ogDescription" content="">
  <!-- Descri√ß√£o usada nas pr√©vias de compartilhamento -->

  <meta property="og:image" id="ogImage" content="">
  <!-- Imagem exibida quando algu√©m compartilha o artigo -->

  <meta property="og:type" content="article">
  <!-- Diz que esta p√°gina √© um artigo -->

  <meta property="og:locale" content="pt_BR">
  <!-- Idioma da p√°gina para redes sociais -->

  <link id="canonicalLink" rel="canonical" href="">
  <!-- Link oficial/correto que o Google deve indexar -->


  <!-- ===================
       AQUI TERMINA O HEAD
       =================== -->
  
</head>
  
<body>

<!-- 
  Aqui come√ßa o corpo da p√°gina.
  Tudo que o usu√°rio realmente v√™ fica dentro do <body>.
-->

  <!-- ===================
       HERO DO BLOG (cabe√ßalho visual grand√£o)
       =================== -->
  <main id="blog-top">
  <!-- 
    A tag <main> marca o conte√∫do principal da p√°gina.
    O id "blog-top" √© usado para identificar este bloco no CSS/JS.
  -->

    <section class="blog-hero-wrap">
    <!-- 
      Esta se√ß√£o envolve o "hero", uma √°rea grande e destacada no topo.
    -->
      <div class="container">
      <!-- Container mant√©m o conte√∫do centralizado e organizado -->
        <div class="blog-hero">
        <!-- 
          Aqui fica o t√≠tulo grande e imagens do hero da p√°gina do blog.
        -->

          <h1 id="heroTitle"></h1>
          <!-- O JavaScript coloca aqui o t√≠tulo do HERO -->

          <p id="heroSubtitle"></p>
          <!-- O JavaScript coloca aqui o subt√≠tulo -->

          <small id="heroSmall"></small>
          <!-- O JavaScript coloca aqui um texto pequeno adicional -->

        </div>
      </div>
    </section>

<div id="searchContainer"></div>
<!-- 
  Aqui √© onde a barra de pesquisa ser√° inserida automaticamente via JavaScript.
-->

<script src="/js/search-data.js"></script>
<!-- Arquivo que cont√©m os dados que podem ser pesquisados -->

<script src="/js/search-bar.js"></script>
<!-- Arquivo que cria a barra de pesquisa e faz ela funcionar -->

    
<script src="/js/blog-hero-config.js"></script>
<!-- Arquivo que cont√©m os textos e a imagem do HERO -->

<script>
/*
  Este script pega os dados do HERO e coloca eles dentro do HTML.
  √â executado quando a p√°gina termina de carregar.
*/
document.addEventListener("DOMContentLoaded", () => {
  const hero = window.BLOG_HERO;
  // Aqui pegamos o objeto BLOG_HERO que est√° em outro arquivo JS

  // Aplica a imagem de fundo no hero
  const heroBox = document.querySelector(".blog-hero");
  heroBox.style.backgroundImage =
    `linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url("${hero.image}")`;
  /* 
    Esta linha coloca a imagem no fundo
    e por cima coloca um leve escurecimento para o texto ficar mais leg√≠vel.
  */

  // Coloca os textos no HTML
  document.getElementById("heroTitle").textContent = hero.title;
  document.getElementById("heroSubtitle").textContent = hero.subtitle;
  document.getElementById("heroSmall").textContent = hero.small;
});
</script>


<!-- ======================================
     CONTE√öDO DO ARTIGO (texto principal)
     ====================================== -->
<section class="article">
  <div class="container">
    <article class="post-card">
    <!-- 
      Este bloco representa o artigo completo dentro do site.
      Ele √© apresentado como um "cart√£o grande".
    -->

      <img id="articleCover" class="article-cover" src="" alt="">
      <!-- A imagem da capa do artigo vai aqui (se showCover = true) -->

      <h1 id="articleTitle"></h1>
      <!-- Aqui aparece o t√≠tulo do artigo vindo da constante ARTICLE -->

      <div id="articleMeta" class="article-meta"></div>
      <!-- Aqui aparece data + autor -->

      <section id="articleContent"></section>
      <!-- Aqui dentro o JS coloca TODO o conte√∫do do artigo -->

      <!-- üîò BOT√ÉO AO FINAL DO ARTIGO -->
      <div class="article-footer">
      <!-- 
        No final do artigo aparece um bot√£o de a√ß√£o
        (ex: "Agendar atendimento").
      -->
        
        <button 
          type="button" 
          class="btn" 
          id="btnAgendarAtendimento"
          onclick="openWA('generic')">
        </button>
        <!-- 
          Este bot√£o abre o WhatsApp.
          O texto dele √© colocado via JavaScript usando SITE_DATA.
        -->
      </div>
    </article>
  </div>
</section>


<!-- ======================================
     LISTA DE ARTIGOS (Artigos Recentes)
     ====================================== -->
<section class="blog-section">
  <div class="container">

    <h2>Artigos Recentes</h2>
    <!-- T√≠tulo da se√ß√£o onde aparecem outros posts -->

    <div id="postsGrid" class="posts-grid">
      <!-- 
        Dentro deste grid, o JS cria v√°rios "cards" de artigos dinamicamente.
      -->
    </div>

    <div id="postsMessage" class="posts-empty" style="display:none;"></div>
    <!-- 
      Esta mensagem aparece caso n√£o existam artigos no arquivo JSON.
    -->

  </div>
</section>


    <!-- ===================
         CONTATO / RODAP√â
         =================== -->
    <footer id="contato" class="site-footer">
  <div class="container footer-card" id="footerContainer">

    <!-- Conte√∫do ser√° injetado via JS -->
  </div>
</footer>
  </main>

  

 <!-- ============================
     MODAL DE LEITURA DO POST
     (abre quando clica em um artigo na lista)
     ============================ -->
<div id="postModalBackdrop" class="modal-backdrop" aria-hidden="true">
<!-- 
  Este √© o fundo escuro que aparece atr√°s do modal.
  aria-hidden="true" diz que ele come√ßa invis√≠vel.
-->

  <article class="modal" role="dialog" aria-modal="true" aria-labelledby="postModalTitle">
  <!-- 
    Aqui √© a CAIXA do modal.
    role="dialog" diz que √© como uma janelinha de conversa.
  -->

    <button class="modal-close" type="button" id="postModalClose" aria-label="Fechar artigo">√ó</button>
    <!-- 
      Este √© o X de fechar no canto superior.
      O JS escuta o clique neste bot√£o para esconder o modal.
    -->

    <header class="modal-header">
      <h2 id="postModalTitle"></h2>
      <!-- T√≠tulo que aparece dentro do modal -->

      <div class="post-meta" id="postModalMeta"></div>
      <!-- Aqui vai data + autor -->
    </header>

    <div class="modal-cover" id="postModalCover" style="display:none;"></div>
    <!-- 
      Aqui aparece a imagem de capa do artigo (se existir).
      Come√ßa escondido com "display:none".
    -->

    <section class="modal-content" id="postModalContent"></section>
    <!-- Aqui vai o conte√∫do do artigo quando aberto dentro do modal -->

    <footer class="modal-footer">
      <button type="button" class="btn" id="postModalWhatsApp"></button>
      <!-- Bot√£o do WhatsApp dentro do modal (texto vem do SITE_DATA) -->

      <button type="button" class="btn" id="postModalCloseBottom"></button>
      <!-- Bot√£o "Fechar" no rodap√© do modal (texto vem do SITE_DATA) -->
    </footer>
  </article>
</div>


<!-- ============================
     SCRIPT PRINCIPAL DO ARTIGO
     ============================ -->
<script>
/*
  Aqui come√ßam v√°rias fun√ß√µes importantes para fazer a p√°gina funcionar.
  Elas cuidam de:
  - transformar markdown em HTML
  - carregar lista de posts
  - abrir e fechar o modal
  - inserir conte√∫do na p√°gina
*/

/* ==========================================
   FUN√á√ÉO: simpleMarkdownToHtml()
   Serve para transformar markdown simples em HTML.
   ========================================== */
function simpleMarkdownToHtml(md) {
  if (!md) return '';

  // Troca quebras de linha antigas por novas
  let text = md.replace(/\r\n/g, '\n');

  // T√≠tulos de v√°rios n√≠veis
  text = text.replace(/^### (.*)$/gm, '<h3>$1</h3>');
  text = text.replace(/^## (.*)$/gm, '<h2>$1</h2>');
  text = text.replace(/^# (.*)$/gm, '<h2>$1</h2>');

  // Negrito **
  text = text.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');

  // It√°lico *
  text = text.replace(/\*(.+?)\*/g, '<em>$1</em>');

  // Transformar listas
  text = text.replace(/^[\-\*] (.*)$/gm, '<li>$1</li>');
  text = text.replace(/(<li>.*<\/li>\n?)+/gm, match => `<ul>${match}</ul>`);

  // Transformar blocos separados por linha vazia em par√°grafos
  const parts = text.split(/\n{2,}/).map(block => {
    if (/^<h[23]>/.test(block) || /^<ul>/.test(block)) {
      return block;
    }
    return `<p>${block.trim()}</p>`;
  });

  return parts.join('\n');
}


/* ==========================================
   CARREGAMENTO DE POSTS
   L√™ o arquivo posts.json e cria os cards na p√°gina.
   ========================================== */

let POSTS_CACHE = [];

async function loadPosts() {
  const grid = document.getElementById('postsGrid');
  const msgEl = document.getElementById('postsMessage');

  if (!grid || !msgEl) return;

  msgEl.style.display = 'none';
  msgEl.textContent = '';

  try {
    // Busca o arquivo que cont√©m os posts
    const response = await fetch('/posts/posts.json', { cache: 'no-store' });

    if (!response.ok) {
      throw new Error('N√£o foi poss√≠vel carregar a lista de artigos.');
    }

    const posts = await response.json();

    if (!Array.isArray(posts) || posts.length === 0) {
      msgEl.style.display = 'block';
      msgEl.textContent = 'Ainda n√£o h√° artigos publicados.';
      return;
    }

    // Ordena do mais recente para o mais antigo
posts.sort((a, b) => new Date(b.date) - new Date(a.date));

POSTS_CACHE = posts;
renderPosts(posts, grid);

  } catch (err) {
    console.error(err);
    msgEl.style.display = 'block';
    msgEl.textContent = 'Ocorreu um problema ao carregar artigos.';
  }
}


/* ==========================================
   FUN√á√ÉO: renderPosts()
   Cria os cards dinamicamente dentro do grid.
   ========================================== */
function renderPosts(posts, container) {
  container.innerHTML = '';

  posts.forEach(post => {
    const card = document.createElement('article');
    card.className = 'post-card';

    // Capa
    if (post.cover) {
      const img = document.createElement('img');
      img.src = post.cover;
      img.alt = post.title || '';
      card.appendChild(img);
    }

    const body = document.createElement('div');
    body.className = 'post-card-body';

    // Tag (ex: Psicologia)
    if (Array.isArray(post.tags) && post.tags.length > 0) {
      const tag = document.createElement('span');
      tag.className = 'post-tag';
      tag.textContent = post.tags[0];
      body.appendChild(tag);
    }

    // T√≠tulo
    const h3 = document.createElement('h3');
    h3.textContent = post.title || 'Artigo sem t√≠tulo';
    body.appendChild(h3);

    // Meta (data + autor)
    const meta = document.createElement('div');
    meta.className = 'post-meta';
    meta.textContent = formatPostMeta(post);
    body.appendChild(meta);

    // Resumo
    if (post.excerpt) {
      const excerpt = document.createElement('div');
      excerpt.className = 'post-excerpt';
      excerpt.textContent = post.excerpt;
      body.appendChild(excerpt);
    }

    // Bot√£o do card
    const footer = document.createElement('div');
    footer.className = 'post-card-footer';

    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'btn';
    btn.textContent = window.SITE_DATA.buttons.readMore;
    // O texto vem do arquivo site-data.js

    btn.addEventListener('click', () => {
      // abre a p√°gina do artigo
      if (post.html) {
        window.location.href = "/" + post.html;
      }
    });

    footer.appendChild(btn);
    body.appendChild(footer);
    card.appendChild(body);
    container.appendChild(card);
  });
}


/* ==========================================
   FUN√á√ÉO: formatPostMeta()
   Formata a data + autor do post
   ========================================== */
function formatPostMeta(post) {
  let parts = [];

  if (post.date) {
    const d = new Date(post.date);
    if (!isNaN(d)) {
      const formatted = d.toLocaleDateString('pt-BR', {
        day: '2-digit',
        month: 'long',
        year: 'numeric'
      });
      parts.push(formatted);
    }
  }

  if (post.author) {
    parts.push('por ' + post.author);
  }

  return parts.join(' ‚Ä¢ ');
}


/* ==========================================
   FUN√á√ÉO DO MODAL (abrir e fechar)
   ========================================== */
const modalBackdrop = document.getElementById('postModalBackdrop');
const modalTitle = document.getElementById('postModalTitle');
const modalMeta = document.getElementById('postModalMeta');
const modalCover = document.getElementById('postModalCover');
const modalContent = document.getElementById('postModalContent');
const modalClose = document.getElementById('postModalClose');
const modalCloseBottom = document.getElementById('postModalCloseBottom');
const modalWhatsApp = document.getElementById('postModalWhatsApp');

async function openPostModal(post) {
  if (!post) return;

  modalTitle.textContent = post.title || '';
  modalMeta.textContent = formatPostMeta(post);

  if (post.cover) {
    modalCover.style.display = 'block';
    modalCover.innerHTML = `<img src="${post.cover}">`;
  } else {
    modalCover.style.display = 'none';
  }

  modalContent.innerHTML = '<p>Carregando conte√∫do...</p>';

  if (!post.file) {
    modalContent.innerHTML = '<p>Conte√∫do n√£o encontrado.</p>';
  } else {
    try {
      const resp = await fetch(post.file, { cache: 'no-store' });
      const md = await resp.text();
      modalContent.innerHTML = simpleMarkdownToHtml(md);
    } catch {
      modalContent.innerHTML = '<p>Erro ao carregar conte√∫do.</p>';
    }
  }

  modalWhatsApp.onclick = () => {
    window.open(waLink('generic'), '_blank');
  };

  modalBackdrop.classList.add('open');
  modalBackdrop.setAttribute('aria-hidden', 'false');
  document.body.style.overflow = 'hidden';
}

function closePostModal() {
  modalBackdrop.classList.remove('open');
  modalBackdrop.setAttribute('aria-hidden', 'true');
  document.body.style.overflow = '';
}

modalClose.addEventListener('click', closePostModal);
modalCloseBottom.addEventListener('click', closePostModal);


/* ==========================================
   INICIALIZA√á√ÉO GERAL DA P√ÅGINA
   ========================================== */
document.addEventListener('DOMContentLoaded', () => {
  loadPosts();
});

/* ==========================================
   CONFIGURA SEO E INSERE CONTE√öDO DO ARTIGO
   ========================================== */
document.addEventListener("DOMContentLoaded", () => {
  // SEO
  document.title = ARTICLE.title + " | William Brioli";
  document.getElementById("metaTitle").textContent = ARTICLE.title;
  document.getElementById("metaDescription").content = ARTICLE.description;
  document.getElementById("ogTitle").content = ARTICLE.title;
  document.getElementById("ogDescription").content = ARTICLE.description;
  document.getElementById("ogImage").content = ARTICLE.cover;
  document.getElementById("canonicalLink").href = ARTICLE.canonical;

  // T√≠tulo no artigo
  document.getElementById("articleTitle").textContent = ARTICLE.title;

  // Capa
  const coverImg = document.getElementById("articleCover");
  if (ARTICLE.showCover && ARTICLE.cover.trim() !== "") {
    coverImg.src = ARTICLE.cover;
    coverImg.alt = ARTICLE.alt || "";
    coverImg.style.display = "block";
  } else {
    coverImg.style.display = "none";
  }

  // Data + autor
  const date = new Date(ARTICLE.date);
  document.getElementById("articleMeta").textContent =
    date.toLocaleDateString("pt-BR", {
      day: "2-digit",
      month: "long",
      year: "numeric"
    }) + " ‚Ä¢ por " + ARTICLE.author;

  // Conte√∫do do artigo
  document.getElementById("articleContent").innerHTML = ARTICLE.content;
});
</script>


<!-- Carrega o arquivo com textos e bot√µes -->
<script src="/js/site-data.js"></script>


<!-- ==========================================
     SCRIPT QUE INJETA TEXTOS DOS BOT√ïES DO SITE_DATA
     ========================================== -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  // Bot√£o final do artigo
  const btn = document.getElementById("btnAgendarAtendimento");
  if (btn && window.SITE_DATA?.buttons?.articleCTA) {
    btn.textContent = window.SITE_DATA.buttons.articleCTA;
  }

  // Bot√£o do modal de WhatsApp
  const modalWA = document.getElementById("postModalWhatsApp");
  if (modalWA && window.SITE_DATA?.buttons?.modalCTA) {
    modalWA.textContent = window.SITE_DATA.buttons.modalCTA;
  }

  // Bot√£o inferior "Fechar"
  const modalCloseBtn = document.getElementById("postModalCloseBottom");
  if (modalCloseBtn && window.SITE_DATA?.buttons?.closeModal) {
    modalCloseBtn.textContent = window.SITE_DATA.buttons.closeModal;
  }
});
</script>


<!-- Scripts complementares -->
<script src="/js/load-whatsapp.js"></script>
<script src="/js/config-whatsapp.js"></script>
<script src="/js/menu.js"></script>
<script src="/js/footer-inject.js"></script>
<script src="/js/author-bio.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", carregarMenu);
  // Faz o menu aparecer automaticamente
</script>

<script src="/js/relacionados-inline.js" defer></script>
  
</body>
</html>
